---
layout: post
title: "Common Gateway Interface(CGI)"
subtitle: "데이터 통신 규약"
author: "GuGyu"
header-style: text
tags:
  - Network
  - HTTP
  - Server
  - CGI
---

## CGI란?

`Common Gateway Interface (CGI)` 란 웹 서버와 웹 어플리케이션 간의 데이터를 주고 받는 방식 또는 컨벤션을 말한다. 방식과 컨벤션, 그리고 Interface라는 키워드가 말해주듯이 CGI는 특정 프로그램이나 기술이라기보다는 통신 방법을 일관성있게 통일하기 위한 하나의 **약속**이라고 할 수 있다. 따라서 CGI는 어떠한 언어로도 구현될 수 있다.  

클라이언트에서 웹 서버에게 웹 페이지를 요청하면 웹 서버는 요청에 맞는 **정적인** 웹 페이지나 데이터를 돌려준다. 그러나 클라이언트가 요청 값에 따라 달라지거나 현재 데이터베이스 상태에 따라 달라지는 **동적인** 웹 페이지 혹은 데이터를 요청할 때는 웹 서버 혼자서는 대처할 수 없다. 따라서 웹 서버는 데이터베이스 접근이나 추가적인 연산을 수행할 수 있는 웹 어플리케이션 서버에게 데이터 처리를 요청해야한다.  

웹 어플리케이션 서버에 데이터를 요청할 때는 다양한 형태의 요청 방법이 있을 것이고 반대로 처리된 데이터를 돌려줄 때도 다양한 형태의 반환 방법이 있을 것이다. 이를 일관된 방식으로 통일하여 웹 서버와 웹 어플리케이션간의 의존성을 줄이고 어떤 플랫폼을 사용하든 통신할 수 있도록 하기위해 CGI라는 표준을 만들어냈다.

<img src="https://user-images.githubusercontent.com/57310034/105956249-dc3b7600-60ba-11eb-835e-9028a2f19ac2.png"/>  

예를 들어 사용자가 검색 페이지에서 검색어를 입력하고 검색 버튼을 눌렀다고 하자. 사용자는 사용자가 입력한 검색어에 대한 검색 결과를 포함한 웹 페이지를 웹 서버에 요청(HTTP Request)한 것으로 볼 수 있다. 그러나 웹 서버는 사용자가 입력한 검색어에 대한 검색 결과를 알 수 없다. 따라서 웹 어플리케이션 서버에게 사용자가 입력한 검색어를 넘겨주고 검색 결과를 요청한다(CGI Request). 그럼 웹 어플리케이션 서버는 전달받은 검색어를 가지고 데이터베이스에 접근해 검색 결과를 구성한다. 이후 결과 값들을 다시 웹 서버에게 돌려주고(CGI Response) 웹 서버는 검색 결과를 클라이언트에게 돌려주는(HTTP Response) 과정를 거친다.

<br>

## CGI 의 한계

CGI는 앞서 설명한대로 프로그램이 아니라 표준 인터페이스이므로 어떠한 언어든 CGI 표준에 맞게 프로그램을 구현하면 동일한 방법으로 웹 서버와 통신이 가능하다. 또한 웹 어플리케이션 서버 프로그램을 어떤 플랫폼에 종속시키더라도 마찬가지다. 게다가 단순하고 가볍기까지 해서 CGI는 널리 사용되었으나 큰 단점이 여럿 발견되었다.  

그 중에서도 가장 치명적인 단점은 웹 서버가 CGI를 통해 데이터를 요청하는 방식이 `fork`로 구현되어 있어 요청이 올 때 마다 새로운 프로세스를 생성한다는 것이었다. 따라서 사용자의 요청이 많으면 웹 어플리케이션 서버의 메모리를 많이 잡아먹었다.  

이 외에도 매 요청 때 마다 DB Connection을 새로 열어야 해서 속도가 느려지는 등 여러가지 단점으로 인해 이를 개선한 다른 대안들이 등장하게 되었다.


---

참고  
[https://show-me-the-money.tistory.com/entry/CGI%EC%99%80-WSGI%EC%9D%84-%ED%8C%8C%ED%97%A4%EC%B9%98%EB%8B%A4](https://show-me-the-money.tistory.com/entry/CGI%EC%99%80-WSGI%EC%9D%84-%ED%8C%8C%ED%97%A4%EC%B9%98%EB%8B%A4)  
[https://live-everyday.tistory.com/197](https://live-everyday.tistory.com/197)  
[https://technote.kr/14](https://technote.kr/14)